# **Solyd - Pentest Profissional v2018**

## **Conteúdo do curso:**

1. [Introdução](#1-introdução)
2. [Preparando o Ambiente](#2-preparando-o-ambiente)
3. [Introdução à Arquitetura de Computadores e Linux](#3-introdução-à-arquitetura-de-computadores-e-linux)
4. [Introdução à programação em Python](#4-introdução-à-programação-em-python)
5. [Introdução à Redes de Computadores](#5-introdução-à-redes-de-computadores)
6. [Programação para Redes](#6-programação-para-redes)
7. [Descoberta e Análise de Redes e Serviços 1](#7-descoberta-e-analise-de-redes-e-serviços-1)
8. [Descoberta e Análise de Redes e Serviços 2](#8-descoberta-e-analise-de-redes-e-serviços-2)
9. [Vulnerabilidades Web 1](#9-vulnerabilidades-web-1)
10. [Vulnerabilidades Web 2](#10-vulnerabilidades-web-2)
11. [Vulnerabilidades Web 3](#11-vulnerabilidades-web-3)
12. [Vulnerabilidades Web 4](#12-vulnerabilidades-web-4)
13. [Criptografia, senhas e brute-forcing](#13-criptografia-senhas-e-brute-forcing)
14. [Descoberta e Análise de Redes e Serviços 3](#14-descoberta-e-analise-de-redes-e-serviços-3)
15. [Exploits e Metasploit](#15-exploits-e-metasploit)
16. [Malwares, shellcode e ofuscação 1](#16-malwares-shellcode-e-ofuscação-1)
17. [Malwares, shellcode e ofuscação 2](#17-malwares-shellcode-e-ofuscação-2)
18. [Malwares, shellcode e ofuscação 3](#18-malwares-shellcode-e-ofuscação-3)
19. [Malware analysis](#19-malware-analysis)
20. [Linux Post Exploitation e Pivoting](#20-linux-post-exploitation-e-pivoting)
21. [Windows Post Exploitation](#21-windows-post-exploitation)
22. [Ataques Man-in-the-middle](#22-ataques-man-in-the-middle)
23. [Ataques de negação de serviço (DoS)](#23-ataques-de-negacao-de-servico-dos)
24. [Wireless Hacking 1](#24-wireless-hacking-1)
25. [Wireless Hacking 2](#25-wireless-hacking-2)
26. [Wireless Hacking 3](#26-wireless-hacking-3)
27. [Wireless Hacking 4 e IoT](#27-wireless-hacking-4-e-iot)
28. [Anonimato e Privacidade](#28-anonimato-e-privacidade)
29. [Android Pentest](#29-android-pentest)
30. [Hacking gadgets](#30-hacking-gadgets)
31. [Conduzindo um Pentest](#31-conduzino-um-pentest)

---

## **1. Introdução**

**Pilares da segurança da informação:**
- Confidencialidade
- Disponibilidade
- Integridade
- Autenticidade
- Não-repúdio

**Certificações:**

- **ISO 27000 / ISO 27002**
- **CompTIA** - Security+
- **Cisco** - CCNA / CCNA Security / CCSP / CCIE Security
- **EC-Council** - CEH / CHFI / ECSA / ENSA / LPT
- **GIAC** - GSIF / GSEC / GCIA / GCFW / GCFA / GCIIH / GPEN
- **ISACA** - CISA / CISM
- **(ISC)2** - CAP / CISSP / CSSLP / ISSAP / ISSEP / ISSMP / SSCP
- **ISECOM** - OPSA / OPST
- **Offensive Security** - OSCP / OSCE

**As fases do Pentest:**

- Definição do escopo e coleta de informações
- Análise de vulnerabilidades
- Exploração
- Pós-exploração
- Relatório

**Tipos de Pentest:**

- Quantos às informações:
    - White Box: o cliente fornece as informações (ex.: código fonte, banco de dados, logins e senhas, etc)
    - Black Box: poucas informações (ex.: domínios, IP's)
    - Gray Box: informações básicas (ex.: logins de exemplo)

- Quanto à locação:
    - Interno: exploração de vulnerabilidades da rede, engenharia social, preparo dos funcionários, etc.
    - Externo: exploração de vulnerabilidades web 
    - Misto

- Quanto ao alvo:
    - Anunciado: o "alvo" sabe do pentest
    - Não anunciado: o "alvo" não sabe do pentest

- Quanto ao ambiente:
    - Produção: serviço funcionando com dados reais
    - Teste / Homologação: serviço separado, dados falsos

**Qualidades e Habilidades:**
- Ética e transparência
- Inglês
- Curiosidade
- Gostar de desafios
- Persistência
- Resolver problemas
- Disciplina

**Legislação Brasileira de Crimes Cibernéticos:**
- Lei 12.737 - 30 de novembro de 2012 (Lei Carolina Dieckmann)
- Lei 12.965 - 23 de abril de 2014 (Marco Civil da Internet)

---

## **2. Preparando o Ambiente**

**Maneiras de utilizar o Kali Linux:**
- Máquinas virtuais (VMWare, VirtualBox, etc)
- Live USB
- Dual/Multi Boot

---

## **3. Introdução à Arquitetura de Computadores e Linux**

**Arquitetura de von Neumann:**
- A arquitetura de computadores criada por von Neumann possui 3 componentes principais:
    - CPU (Central Process Unity): Realiza o processamento das informações do computadores 
    - Memória: Armazena os programas que estão sendo rodados no computadores, enviando e recebendo arquivos da CPU e trocando dados com os dispositivos de I/O
    - Dispositivos I/O: Dispositivos de interface humana (mouse, teclado, monitor, etc)

**Estrutura de pastas do Linux:**
- /home: arquivos do usuario
- /etc (etcetera): arquivos de configuração
- /bin (binaries): binários (programas) do sistema
- /boot: arquivos de boot (grub)
- /dev (devices): arquivos de dispositivo
- /lib (libraries): bibliotecas
- /media ou /mnt (mount points): dispositivos de midia removíveis
- /opt (optional packages): softwares opcionais/adicionais
- /proc (kernel & process files): arquivos de processos
- /run: arquivos que mostram programas que estão rodando
- /sys: arquivos de sistema
- /usr: softwares adicionais

**Permissões no Linux:**

3 grupos de letras:
- grupo 1: seu usuario
- grupo 2: seu grupo
- grupo 3: todos usuários

Letra | Significado | Tradução | Número 
----- | ----------- | -------- | -------
r     | read        | leitura  | 4
w     | write       | escrita  | 2
x     | execute     | execução | 1

**Exemplo: -rw- r-- r-- / Código numérico: 644**
- O usuário possui apenas permissão de leitura e escrita
- O grupo possui apenas permissão de leitura
- Todos usuários possuem apenas permissão de leitura

**Piping e Direcionamento de comandos:**
- **| (pipe)**: A saída de um comando será a entrada de outro comando.
- **>** ou **<**: Insere a saída de um comando em um arquivo substituindo o conteúdo que estiver salvo.
- **>>** ou **<<**: Insere a saída de um comando em um arquivo, porém adicionando ao conteúdo que estiver salvo.
- **&**: Ao ser inserido entre 2 comandos, executa os dois ao mesmo tempo. Caso seja um processo, será rodado em segundo plano.
- **&&**: Ao ser inserido entre 2 comandos, executa o próximo apenas quando o anterior tiver sido concluído.
- **||**: É inserido entre um comando e uma mensagem para caso o comando retorne um erro.

**Shellscript:**
- **env**: Variáveis de ambiente, para mostrá-las basta usar 'echo $variavel'
- **condicionais**:

```
if [ "$answer" = "yes" ]
then
echo "True"
fi

if [ "$answer" = "no" ]
then
echo "False"
fi
```

- **loops**:

```
for ((i=0;i<=10;i++))
do
  echo $i
done

---

for animals in "dog" "cat" "bear"
do
  echo $animal
done

---

while sleep 1
do
  datetime
done
```

---

## **4. Introdução à programação em Python**

- Variáveis
- Operadores matemáticos e lógicos
- Estruturas condicionais
- Estruturas de repetição (loops)
- Estruturas de dados
- Funções
- Orientação à Objetos

---

## **5. Introdução à Redes de Computadores**

**Tipos de Redes**:
- LAN (Local Area Network)
- WAN (Wide Area Network)

**Dispositivos de Rede**:
- Repetidor
- Hub
- Bridge
- Switch
- Roteador

**Modelo Kurose (Híbrido dos Modelos OSI e TCP/IP)**:

CAMADA | NOME        | PDU       | EXEMPLOS         | 
------ | ----------- | --------- | ---------------- |
5      | APLICAÇÃO   | DADOS     | HTTP/FTP/SSH...  |
4      | TRANSPORTE  | SEGMENTOS | TCP/UDP          |
3      | REDE        | PACOTES   | IPv4, IPv6, ICMP |
2      | ENLACE      | QUADROS   | MAC Address      |
1      | FÍSICA      | BITS      | Raw Data (bits)  |

**NAT (Network Address Translation)**:
O roteador traduz um IP privado para um IP público de modo a permitir a conexão entre um dispositivo em LAN a rede mundial WAN.

**ARP (Address Resolution Protocol)**:
É um protocolo que traça um endereço de protocolo de Internet a um MAC address que seja reconhecido na rede local.

**Protocolo UDP x Protocolo TCP**:

**UDP (User Datagram Protocol)**:
- 8 bit Header
- Não precisa de conexão estabelecida
- Sem recuperação de erros
- Sem controle de tráfego

**TCP (Transmission Control Protocol)**:
- 20 bit Header
- Negociar a conexão antes
- 3-Way Handshake
- Mantém pacotes em ordem
- Maior número de pacotes
- Orientado a transmissão e fluxo

**DNS (Domain Name Service)**:
Traduz os endereços IP em nomes

**Tipos de entradas DNS**:
- **A / AAAA**: Redirecionamento direto (nome -> IP)
- **CNAME**: "Apelido" de um endereço (gogle.com -> google.com)
- **MX**: Redirecionamento de e-mails de acordo com o @
- **TXT**: Entrada de texto

**Aplicações e portas**:

![aplicaoes_e_portas](./aplicacoes_e_portas.png)

---

## **6. Programação para Redes**

**Usando Python 2.7 para criar servidor/cliente TCP e Cliente SSH**:

**Cliente TCP**:

```python
import socket

ip = "127.0.0.1"
port = 8000

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.settimeout(1)

try:
    client.connect((ip, port))

    data = raw_input("Message: ")

    client.send(data)

    received = client.recv(1024)

    print received

except Exception as erro:
    print "Error: " + str(erro)

    client.close()
```

**Servidor TCP**:

```python
import socket

ip = "127.0.0.1"
port = 8000

server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server.bind((ip, port))
server.listen(5)

try:
    while True:
        (connection, addres) = server.accept()
        data = client_socket.recv(1024)
        connection.send(data)

    server.close()

except Exception as erro:
    print "Error: " + str(erro)

    server.close()
```

**Cliente SSH**:

```python
import paramiko

host = "127.0.0.1"
port = 443
user = "user_example"
passwd = "pass_example"

client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect(host, port, username=user, password=passwd)

while True:
    command = raw_input("Command: ")
    stdin, stdout, stderr = client.exec_command(command)

    print stdin.readlines()
    print stdout.readlines()

client.close()
```

---

## **7. Descoberta e Análise de Redes e Serviços 1**

Text

---

## **8. Descoberta e Análise de Redes e Serviços 2**

Text

---

## **9. Vulnerabilidades Web 1**

Text

---

## **10. Vulnerabilidades Web 2**

Text

---

## **11. Vulnerabilidades Web 3**

Text

---

## **12. Vulnerabilidades Web 4**

Text

---

## **13. Criptografia, senhas e brute-forcing**

Text

---

## **14. Descoberta e Análise de Redes e Serviços 3**

Text

---

## **15. Exploits e Metasploit**

Text

---

## **16. Malwares, shellcode e ofuscação 1**

Text

---

## **17. Malwares, shellcode e ofuscação 2**

Text

---

## **18. Malwares, shellcode e ofuscação 3**

Text

---

## **19. Malware analysis**

Text

---

## **20. Linux Post Exploitation e Pivoting**

Text

---

## **21. Windows Post Exploitation**

Text

---

## **22. Ataques Man-in-the-middle**

Text

---

## **23. Ataques de negação de serviço (DoS)**

Text

---

## **24. Wireless Hacking 1**

Text

---

## **25. Wireless Hacking 2**

Text

---

## **26. Wireless Hacking 3**

Text

---

## **27. Wireless Hacking 4 e IoT**

Text

---

## **28. Anonimato e Privacidade**

Text

---

## **29. Android Pentest**

Text

---

## **30. Hacking gadgets**

Text

---

## **31. Conduzindo um Pentest**

Text

---